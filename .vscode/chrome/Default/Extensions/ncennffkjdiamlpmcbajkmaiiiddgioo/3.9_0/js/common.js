var EventContainer=function(){};EventContainer.prototype.attachEvent=function(e,t,r,n){if(typeof r!="function"){console.error("AttachEvent fpNotify is not function")}if(!this[t])this[t]=[];if(!(this[t]instanceof Array))return false;for(var o=0;o<this[t].length;o++)if(this[t][o].o==e&&this[t][o].f==r)return true;this[t].push({o:e,f:r,t:n});return true};EventContainer.prototype.detachEvent=function(e,t,r){if(!this[t]||!(this[t]instanceof Array))return false;for(var n=0;n<this[t].length;n++){if(this[t][n].o==e&&this[t][n].f==r){this[t].splice(n,1);if(0==this[t].length)delete this[t];return true}}return false};EventContainer.prototype.fireEvent=function(e){if(!this[e]||!(this[e]instanceof Array))return false;var t=[].slice.call(arguments);var r=this[e].slice(0);var n=false;for(var o=0;o<r.length;o++){if(typeof r[o].t=="number")r[o].f.delayApply(r[o].t,r[o].o,t.slice(1));else n|=r[o].f.apply(r[o].o,t.slice(1));if(n){break}}return n};function generalWebPeerId(e){var r=Date.now();if(typeof performance!=="undefined"&&typeof performance.now==="function"){r+=performance.now()}var t="xxxxxxxxxxxxxxx".replace(/[x]/g,function(e){var t=(r+Math.random()*36)%36|0;r=Math.floor(r/36);rc=(e==="x"?t:t&3|8).toString(36);return Math.random()>.5?rc:rc.toUpperCase()});return t+e}function getWebPeerId(r,n){chrome.storage.local.get("__XLWebPeerId__",function(e){console.log("getWebPeerId items: ",e);if(e&&e.__XLWebPeerId__){n(e.__XLWebPeerId__)}else{var t=generalWebPeerId(r);console.log("generalWebPeerId: ",t);chrome.storage.local.set({__XLWebPeerId__:t});n(t)}})}function Ajax(e){e=e||{};e.data=e.data||{};var t=e.jsonp?jsonp(e):t(e);function t(n){n.type=(n.type||"GET").toUpperCase();n.data=r(n.data);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState==4){var e=o.status;if(e>=200&&e<300){var t="";var r=o.getResponseHeader("Content-type");if(r.indexOf("xml")!==-1&&o.responseXML){t=o.responseXML}else if(r==="application/json"){t=JSON.parse(o.responseText)}else{t=o.responseText}n.success&&n.success(t)}else{n.error&&n.error(e)}}};if(n.type=="GET"){if(n.data.length>0){o.open(n.type,n.url+"?"+n.data,true)}else{o.open(n.type,n.url,true)}o.send(null)}else{o.open(n.type,n.url,true);o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");o.send(n.data)}}function r(e){var t=[];for(var r in e){t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}return t.join("&")}}